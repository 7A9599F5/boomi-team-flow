{
  "_comment": "POST https://api.boomi.com/partner/api/rest/v1/{primaryAccountId}/Branch",
  "_notes": [
    "Creates a new branch in the primary (production) account",
    "Branch name follows pattern: promo-{promotionId}",
    "After creation, poll GET /Branch/{branchId} until ready=true (typically 5-30s)",
    "Branch limit: 20 per account — check count before creation",
    "All terminal paths (approve, reject, deny) must DELETE the branch",
    "Components are promoted to the branch via tilde syntax: POST /Component/{id}~{branchId}"
  ],
  "_lifecycle": [
    "1. CREATE: POST /Branch → returns branchId",
    "2. POLL: GET /Branch/{branchId} until ready=true",
    "3. PROMOTE: Process C writes to branch via Component/{id}~{branchId}",
    "4. REVIEW: Process G reads branch vs main for diff",
    "5a. APPROVE: MergeRequest OVERRIDE → execute MERGE → Package from main → DELETE branch",
    "5b. REJECT/DENY: DELETE /Branch/{branchId} — main untouched"
  ],
  "_pre_check": {
    "description": "Before creating, query existing branches to enforce limit",
    "method": "POST",
    "url": "/partner/api/rest/v1/{primaryAccountId}/Branch/query",
    "body": "<QueryFilter xmlns='http://api.platform.boomi.com/'/>",
    "threshold": 18,
    "errorCode": "BRANCH_LIMIT_REACHED",
    "errorMessage": "Too many active promotions. Please wait for pending reviews to complete."
  },
  "name": "promo-{promotionId}"
}
