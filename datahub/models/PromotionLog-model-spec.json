{
  "modelName": "PromotionLog",
  "rootElement": "PromotionLog",
  "description": "Audit log for each promotion run. Tracks metadata, status, and detailed results for every component promotion from dev to production. Provides compliance trail and debugging information.",
  "fields": [
    {
      "name": "promotionId",
      "type": "String",
      "description": "UUID uniquely identifying this promotion run",
      "required": true,
      "matchField": true
    },
    {
      "name": "devAccountId",
      "type": "String",
      "description": "Source dev sub-account ID",
      "required": true,
      "matchField": false
    },
    {
      "name": "prodAccountId",
      "type": "String",
      "description": "Target production account ID",
      "required": true,
      "matchField": false
    },
    {
      "name": "devPackageId",
      "type": "String",
      "description": "PackagedComponent packageId from dev account used for promotion",
      "required": true,
      "matchField": false
    },
    {
      "name": "prodPackageId",
      "type": "String",
      "description": "PackagedComponent packageId created in production account during packaging step",
      "required": false,
      "matchField": false
    },
    {
      "name": "initiatedBy",
      "type": "String",
      "description": "SSO user email who initiated the promotion",
      "required": true,
      "matchField": false
    },
    {
      "name": "initiatedAt",
      "type": "Date",
      "description": "Timestamp when promotion started (format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z')",
      "required": true,
      "matchField": false
    },
    {
      "name": "status",
      "type": "String",
      "description": "Current status lifecycle: IN_PROGRESS → COMPLETED → PENDING_PEER_REVIEW → PEER_APPROVED → PENDING_ADMIN_REVIEW → ADMIN_APPROVED → DEPLOYED. Rejection branches: PENDING_PEER_REVIEW → PEER_REJECTED, PENDING_ADMIN_REVIEW → ADMIN_REJECTED. Legacy/error: FAILED",
      "required": true,
      "matchField": false
    },
    {
      "name": "componentsTotal",
      "type": "Number",
      "description": "Total number of components in dependency tree",
      "required": true,
      "matchField": false
    },
    {
      "name": "componentsCreated",
      "type": "Number",
      "description": "Number of new components created in production",
      "required": true,
      "matchField": false
    },
    {
      "name": "componentsUpdated",
      "type": "Number",
      "description": "Number of existing production components updated",
      "required": true,
      "matchField": false
    },
    {
      "name": "componentsFailed",
      "type": "Number",
      "description": "Number of components that failed to promote",
      "required": true,
      "matchField": false
    },
    {
      "name": "errorMessage",
      "type": "String",
      "description": "Error details if promotion failed (up to 5000 characters)",
      "required": false,
      "matchField": false
    },
    {
      "name": "resultDetail",
      "type": "String",
      "description": "JSON string with per-component results and metadata (up to 5000 characters)",
      "required": false,
      "matchField": false
    },
    {
      "name": "peerReviewStatus",
      "type": "String",
      "description": "Peer review gate status: PENDING_PEER_REVIEW, PEER_APPROVED, or PEER_REJECTED",
      "required": false,
      "matchField": false
    },
    {
      "name": "peerReviewedBy",
      "type": "String",
      "description": "Email of the peer reviewer who approved or rejected",
      "required": false,
      "matchField": false
    },
    {
      "name": "peerReviewedAt",
      "type": "Date",
      "description": "Timestamp when peer review action was taken (format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z')",
      "required": false,
      "matchField": false
    },
    {
      "name": "peerReviewComments",
      "type": "String",
      "description": "Peer reviewer comments (up to 500 characters)",
      "required": false,
      "matchField": false
    },
    {
      "name": "adminReviewStatus",
      "type": "String",
      "description": "Admin review gate status: PENDING_ADMIN_REVIEW, ADMIN_APPROVED, or ADMIN_REJECTED",
      "required": false,
      "matchField": false
    },
    {
      "name": "adminApprovedBy",
      "type": "String",
      "description": "Email of the admin who approved or rejected",
      "required": false,
      "matchField": false
    },
    {
      "name": "adminApprovedAt",
      "type": "Date",
      "description": "Timestamp when admin review action was taken (format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z')",
      "required": false,
      "matchField": false
    },
    {
      "name": "adminComments",
      "type": "String",
      "description": "Admin reviewer comments (up to 500 characters)",
      "required": false,
      "matchField": false
    },
    {
      "name": "branchId",
      "type": "String",
      "description": "Promotion branch ID — set on branch creation, cleared (null) after branch cleanup on any terminal path (approve, reject, deny)",
      "required": false,
      "matchField": false
    },
    {
      "name": "branchName",
      "type": "String",
      "description": "Promotion branch name (e.g., promo-{promotionId})",
      "required": false,
      "matchField": false
    },
    {
      "name": "integrationPackId",
      "type": "String",
      "description": "Integration Pack ID — populated after successful deploy (Process D)",
      "required": false,
      "matchField": false
    },
    {
      "name": "integrationPackName",
      "type": "String",
      "description": "Human-readable Integration Pack name — populated after successful deploy",
      "required": false,
      "matchField": false
    },
    {
      "name": "processName",
      "type": "String",
      "description": "Root process name — used for Integration Pack suggestions on future promotions of the same process",
      "required": false,
      "matchField": false
    }
  ],
  "matchRules": [
    {
      "type": "EXACT",
      "description": "Match on promotion ID (each promotion run is unique)",
      "fields": ["promotionId"]
    }
  ],
  "sources": [
    {
      "name": "PROMOTION_ENGINE",
      "type": "contribute-only",
      "description": "Written by promotion engine at start (IN_PROGRESS), updated at completion (COMPLETED/FAILED), and updated by peer review (Process E2) and admin review (Process E3) during the 2-layer approval workflow"
    }
  ],
  "dataQualitySteps": [],
  "notes": "This model provides complete audit trail for compliance and troubleshooting. The promotion engine creates a record at the start of each promotion (status=IN_PROGRESS) and updates it when complete. After promotion completes, the record enters a 2-layer approval workflow: peer review (peerReviewStatus) followed by admin review (adminReviewStatus). Self-review prevention is enforced at the backend level (reviewer cannot equal initiatedBy). The resultDetail field stores structured JSON for detailed analysis of individual component outcomes. The branchId field tracks the Boomi Branching promotion branch lifecycle — set on creation, cleared after cleanup. The processName and integrationPackId fields enable smart Integration Pack suggestions for repeat promotions."
}
